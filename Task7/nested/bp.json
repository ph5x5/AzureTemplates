{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"vault": {
			"type": "object"
		},
		"backupPolicy": {
			"type": "object"
		}
	},
	"variables": { },
	"resources": [
		{
			"name": "[concat(parameters('vault').name, '/bp')]",
			"type": "Microsoft.RecoveryServices/vaults/backupPolicies",
			"location": "[parameters('vault').location]",
			"apiVersion": "2016-06-01",
			"properties": {
				"backupManagementType": "[parameters('backupPolicy').backupManagementType]",
				"protectedItemsCount": "[parameters('backupPolicy').protectedItemsCount]",
				"schedulePolicy": {
					"scheduleRunFrequency": "[parameters('backupPolicy').scheduleRunFrequency]",
					"scheduleRunDays": "[parameters('backupPolicy').scheduleRunDays]",
					"scheduleRunTimes": "[parameters('backupPolicy').scheduleRunTimes]",
					"schedulePolicyType": "[parameters('backupPolicy').schedulePolicyType]"
				},
				"retentionPolicy": {
					"dailySchedule": {
						"retentionTimes": "[parameters('backupPolicy').dailyRetentionTimes]",
						"retentionDuration": {
							"count": "[parameters('backupPolicy').dailyRetentionDurationCount]",
							"durationType": "[parameters('backupPolicy').dailyRetentionDurationType]"
						}
					},
					"weeklySchedule": null,
					"monthlySchedule": null,
					"yearlySchedule": null,
					"retentionPolicyType": "[parameters('backupPolicy').retentionPolicyType]"
				},
				"timeZone": "[parameters('backupPolicy').timeZone]"
			}
		}
	],
	"outputs": { }
}